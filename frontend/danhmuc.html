<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Thêm danh mục sản phẩm</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>


<body>
  <div class="container py-4">
    <h3 class="mb-4">📦 Thêm danh mục sản phẩm</h3>

    <form id="categoryForm" class="mb-4">
      <div class="mb-3">
        <label for="categoryName" class="form-label">Tên danh mục</label>
        <input type="text" class="form-control" id="categoryName" required>
      </div>
      <div class="mb-3">
        <label for="categoryPrice" class="form-label">Giá sản phẩm (VNĐ)</label>
        <input type="number" class="form-control" id="categoryPrice" required>
      </div>
      <div class="mb-3">
        <label for="categoryImage" class="form-label">Hình ảnh sản phẩm</label>
        <input type="file" class="form-control" id="categoryImage" accept="image/*" required>
      </div>
      <button type="submit" class="btn btn-success">Thêm</button>
    </form>

    <h5>📋 Danh sách danh mục</h5>
    <div id="categoryList"></div>
  </div>

  <script>
    const form = document.getElementById('categoryForm');
    const list = document.getElementById('categoryList');

    // Load từ LocalStorage khi mở trang
    window.onload = function() {
      const saved = JSON.parse(localStorage.getItem('categories')) || [];
      saved.forEach(item => renderItem(item));
    };

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const name = document.getElementById('categoryName').value;
      const price = document.getElementById('categoryPrice').value;
      const imageInput = document.getElementById('categoryImage');
      const file = imageInput.files[0];

      if (!file) return;

      const reader = new FileReader();
      reader.onload = function() {
        const item = {
          name,
          price,
          image: reader.result
        };

        saveToLocal(item);
        renderItem(item);
        form.reset();
      };
      reader.readAsDataURL(file);
    });

    function renderItem(item) {
      const div = document.createElement('div');
      div.className = 'category-item';
      div.innerHTML = `
        <img src="${item.image}" alt="${item.name}">
        <div>
          <strong>${item.name}</strong><br>
          Giá: ${parseInt(item.price).toLocaleString()} VNĐ
        </div>
        <button class="delete-btn">Xóa</button>
      `;
      div.querySelector('.delete-btn').onclick = function() {
        div.remove();
        removeFromLocal(item);
      };
      list.appendChild(div);
    }

    function saveToLocal(item) {
      const saved = JSON.parse(localStorage.getItem('categories')) || [];
      saved.push(item);
      localStorage.setItem('categories', JSON.stringify(saved));
    }

    function removeFromLocal(item) {
      let saved = JSON.parse(localStorage.getItem('categories')) || [];
      saved = saved.filter(i => i.name !== item.name || i.price !== item.price);
      localStorage.setItem('categories', JSON.stringify(saved));
    }
  </script>

  
<!-- Thanh menu dưới -->
  <nav class="navbar fixed-bottom navbar-light bg-light border-top">
    <div class="container d-flex justify-content-around">
      <a href="home.html" class="text-center text-decoration-none">
        <i class="bi bi-house"></i><br>Đơn hàng
      </a>
      <a href="taodon.html" class="text-center text-decoration-none">
        <i class="bi bi-receipt"></i><br>Tạo đơn
      </a>
      <a href="danhmuc.html" class="text-center text-decoration-none">
        <i class="bi bi-box-seam"></i><br>Danh mục
      </a>
      <a href="#" class="text-center text-decoration-none">
        <i class="bi bi-graph-up"></i><br>Thống kê
      </a>
      <a href="#" class="text-center text-decoration-none">
        <i class="bi bi-gear"></i><br>Cài đặt
      </a>
    </div>
  </nav>
</body>
</html>
